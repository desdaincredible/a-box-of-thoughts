{"ast":null,"code":"import { REGISTER, USER_CONSTANTS } from '../constants/action-types';\nexport function handleRegister(formData) {\n  return function (dispatch) {\n    return fetch(\"http://localhost:9000/users\", {\n      method: \"POST\",\n      body: JSON.stringify(formData),\n      credentials: 'include',\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    }).then(response => response.json()).then(json => {\n      dispatch({\n        type: REGISTER,\n        payload: json\n      });\n    });\n  };\n}\n;\nimport { userConstants } from '../_constants';\nimport { userService } from '../_services';\nimport { history } from '../_helpers';\nexport const userActions = {\n  login,\n  logout,\n  register,\n  getAll,\n  delete: _delete\n};\n\nfunction login(username, password) {\n  return dispatch => {\n    dispatch(request({\n      username\n    }));\n    userService.login(username, password).then(user => {\n      dispatch(success(user));\n      history.push('/');\n    }, error => {\n      dispatch(failure(error.toString()));\n      console.log(err);\n    });\n  };\n\n  function request(user) {\n    return {\n      type: userConstants.LOGIN_REQUEST,\n      user\n    };\n  }\n\n  function success(user) {\n    return {\n      type: userConstants.LOGIN_SUCCESS,\n      user\n    };\n  }\n\n  function failure(error) {\n    return {\n      type: userConstants.LOGIN_FAILURE,\n      error\n    };\n  }\n}\n\nfunction logout() {\n  userService.logout();\n  return {\n    type: userConstants.LOGOUT\n  };\n}\n\nfunction register(user) {\n  return dispatch => {\n    dispatch(request(user));\n    userService.register(user).then(user => {\n      dispatch(success());\n      history.push('/login');\n      console.log(\"Registration of \".concat(user.username, \" successful\"));\n    }, error => {\n      dispatch(failure(error.toString()));\n      console.log(error);\n    });\n  };\n\n  function request(user) {\n    return {\n      type: userConstants.REGISTER_REQUEST,\n      user\n    };\n  }\n\n  function success(user) {\n    return {\n      type: userConstants.REGISTER_SUCCESS,\n      user\n    };\n  }\n\n  function failure(error) {\n    return {\n      type: userConstants.REGISTER_FAILURE,\n      error\n    };\n  }\n}\n\nfunction deleteUser(id) {\n  return dispatch => {\n    dispatch(request(id));\n    userService.deleteUser(id).then(user => dispatch(success(id)), error => console.log(error));\n  };\n\n  function request(id) {\n    return {\n      type: userConstants.DELETE_REQUEST,\n      id\n    };\n  }\n\n  function success(id) {\n    return {\n      type: userConstants.DELETE_SUCCESS,\n      id\n    };\n  }\n}","map":{"version":3,"sources":["/Users/moosesdeuces/sei-june-bug/6-5-box-of-thoughts-redux/box-of-thoughts-redux/client/src/js/actions/actions.js"],"names":["REGISTER","USER_CONSTANTS","handleRegister","formData","dispatch","fetch","method","body","JSON","stringify","credentials","headers","then","response","json","type","payload","userConstants","userService","history","userActions","login","logout","register","getAll","delete","_delete","username","password","request","user","success","push","error","failure","toString","console","log","err","LOGIN_REQUEST","LOGIN_SUCCESS","LOGIN_FAILURE","LOGOUT","REGISTER_REQUEST","REGISTER_SUCCESS","REGISTER_FAILURE","deleteUser","id","DELETE_REQUEST","DELETE_SUCCESS"],"mappings":"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","sourcesContent":["import { REGISTER, USER_CONSTANTS } from '../constants/action-types';\n\n\nexport function handleRegister(formData){\n    return function(dispatch){\n        return fetch(\"http://localhost:9000/users\", {\n            method: \"POST\",\n            body: JSON.stringify(formData),\n            credentials: 'include',\n            headers: {\n              \"Content-Type\": \"application/json\",\n            }\n          })\n            .then(response => response.json())\n            .then(json => { dispatch({ type: REGISTER, payload: json});\n        })\n    }\n};\n\nimport { userConstants } from '../_constants';\nimport { userService } from '../_services';\nimport { history } from '../_helpers';\n\nexport const userActions = {\n    login,\n    logout,\n    register,\n    getAll,\n    delete: _delete\n};\n\nfunction login(username, password) {\n    return dispatch => {\n        dispatch(request({ username }));\n\n        userService.login(username, password)\n            .then(\n                user => { \n                    dispatch(success(user));\n                    history.push('/');\n                },\n                error => {\n                    dispatch(failure(error.toString()));\n                    console.log(err);\n                }\n            );\n    };\n\n    function request(user) { return { type: userConstants.LOGIN_REQUEST, user } }\n    function success(user) { return { type: userConstants.LOGIN_SUCCESS, user } }\n    function failure(error) { return { type: userConstants.LOGIN_FAILURE, error } }\n}\n\nfunction logout() {\n    userService.logout();\n    return { type: userConstants.LOGOUT };\n}\n\nfunction register(user) {\n    return dispatch => {\n        dispatch(request(user));\n\n        userService.register(user)\n            .then(\n                user => { \n                    dispatch(success());\n                    history.push('/login');\n                    console.log(`Registration of ${user.username} successful`);\n                },\n                error => {\n                    dispatch(failure(error.toString()));\n                    console.log(error)\n                }\n            );\n    };\n\n    function request(user) { return { type: userConstants.REGISTER_REQUEST, user } }\n    function success(user) { return { type: userConstants.REGISTER_SUCCESS, user } }\n    function failure(error) { return { type: userConstants.REGISTER_FAILURE, error } }\n}\n\nfunction deleteUser(id) {\n    return dispatch => {\n        dispatch(request(id));\n\n        userService.deleteUser(id)\n            .then(\n                user => dispatch(success(id)),\n                error => console.log(error)\n            );\n    };\n\n    function request(id) { return { type: userConstants.DELETE_REQUEST, id } }\n    function success(id) { return { type: userConstants.DELETE_SUCCESS, id } }\n}"]},"metadata":{},"sourceType":"module"}